<template>
  <section class="gallery__section">
    <div class="container mx-auto px-5">
      <CommonHeader title="우리의 순간" subtitle="GALLERY" />

      <div class="grid__wrapper" :class="{ expanded: isMoreView }">
        <div class="grid__container columns-2 gap-2">
          <div class="grid__item" v-for="(item, i) of galleryItems" :key="i">
            <figure @click="() => openLightbox(i)">
              <img :src="item" alt="" loading="lazy" />
              <div class="overlay"></div>
            </figure>
          </div>
        </div>
      </div>

      <BaseButton variant="default" bold @click="isMoreView = !isMoreView">
        <template #icon v-if="!isMoreView">
          <svg
            width="17"
            height="16"
            viewBox="0 0 17 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g clip-path="url(#clip0_82_11)">
              <path
                d="M8.50011 1.88802e-07C8.32411 1.88802e-07 8.14978 0.00566686 7.97711 0.0170002L8.04111 1.015C8.34678 0.994914 8.65344 0.994914 8.95911 1.015L9.02311 0.0170002C8.84901 0.00563198 8.67459 -3.77165e-05 8.50011 1.88802e-07ZM6.94011 0.152C6.59345 0.221334 6.25611 0.311334 5.92811 0.422L6.24911 1.37C6.53578 1.272 6.83045 1.193 7.13311 1.133L6.94011 0.153V0.152ZM11.0721 0.423C10.7414 0.311033 10.4036 0.22084 10.0611 0.153L9.86711 1.133C10.1691 1.193 10.4638 1.272 10.7511 1.37L11.0721 0.423ZM12.9451 1.348C12.6549 1.15374 12.3522 0.978703 12.0391 0.824L11.5961 1.72C11.8714 1.85667 12.1358 2.00967 12.3891 2.179L12.9451 1.348ZM4.96011 0.824C4.64611 0.979334 4.34445 1.154 4.05511 1.348L4.61111 2.178C4.86517 2.00819 5.13007 1.85519 5.40411 1.72L4.96011 0.824ZM3.22511 1.985C2.96245 2.21567 2.71578 2.46233 2.48511 2.725L3.23711 3.385C3.43911 3.155 3.65511 2.939 3.88511 2.737L3.22511 1.985ZM14.5151 2.725C14.2849 2.46245 14.0377 2.21525 13.7751 1.985L13.1151 2.737C13.3458 2.939 13.5618 3.155 13.7631 3.385L14.5151 2.725ZM15.6761 4.46C15.5214 4.14723 15.3463 3.84492 15.1521 3.555L14.3221 4.111C14.4914 4.36433 14.6441 4.62867 14.7801 4.904L15.6761 4.46ZM1.84811 3.555C1.65345 3.84367 1.47878 4.14567 1.32411 4.461L2.22011 4.904C2.35678 4.62867 2.50978 4.36433 2.67911 4.111L1.84811 3.555ZM0.923114 5.428C0.811146 5.75875 0.720953 6.09647 0.653114 6.439L1.63311 6.633C1.69311 6.331 1.77211 6.03633 1.87011 5.749L0.923114 5.428ZM16.3481 6.44C16.2803 6.09713 16.1901 5.75907 16.0781 5.428L15.1301 5.749C15.2281 6.03567 15.3071 6.33033 15.3671 6.633L16.3481 6.44ZM0.517114 7.477C0.494295 7.82529 0.494295 8.17471 0.517114 8.523L1.51511 8.459C1.49503 8.15333 1.49503 7.84667 1.51511 7.541L0.517114 7.477ZM16.5001 8C16.5002 7.82553 16.4945 7.6511 16.4831 7.477L15.4851 7.541C15.5052 7.84667 15.5052 8.15333 15.4851 8.459L16.4831 8.523C16.4945 8.3489 16.5002 8.17447 16.5001 8ZM0.652114 9.56C0.721447 9.90667 0.811447 10.244 0.922114 10.572L1.87011 10.251C1.77191 9.96182 1.69275 9.66652 1.63311 9.367L0.653114 9.561L0.652114 9.56ZM16.0771 10.572C16.1891 10.2433 16.2791 9.90633 16.3471 9.561L15.3671 9.367C15.3071 9.669 15.2281 9.96367 15.1301 10.251L16.0771 10.572ZM1.32411 11.54C1.47886 11.8528 1.6539 12.1551 1.84811 12.445L2.67811 11.889C2.5083 11.6349 2.35531 11.37 2.22011 11.096L1.32411 11.54ZM15.1521 12.445C15.3468 12.1557 15.5214 11.8537 15.6761 11.539L14.7801 11.096C14.6434 11.3713 14.4904 11.6357 14.3211 11.889L15.1521 12.445ZM2.48511 13.275C2.71578 13.5377 2.96245 13.7843 3.22511 14.015L3.88511 13.263C3.65519 13.0614 3.43873 12.8449 3.23711 12.615L2.48511 13.275ZM13.7751 14.015C14.0378 13.7843 14.2844 13.5377 14.5151 13.275L13.7631 12.615C13.5618 12.8457 13.3458 13.0617 13.1151 13.263L13.7751 14.015ZM12.0401 15.176C12.3541 15.0207 12.6558 14.846 12.9451 14.652L12.3891 13.822C12.1351 13.9918 11.8702 14.1448 11.5961 14.28L12.0401 15.176ZM4.05511 14.652C4.34445 14.8467 4.64645 15.0213 4.96111 15.176L5.40411 14.28C5.13004 14.1445 4.86514 13.9912 4.61111 13.821L4.05511 14.652ZM5.92811 15.577C6.25678 15.689 6.59378 15.779 6.93911 15.847L7.13311 14.867C6.83359 14.8074 6.5383 14.7282 6.24911 14.63L5.92811 15.577ZM10.0601 15.848C10.403 15.7802 10.741 15.69 11.0721 15.578L10.7511 14.63C10.4619 14.7282 10.1666 14.8074 9.86711 14.867L10.0611 15.847L10.0601 15.848ZM7.97711 15.983C8.32541 16.0058 8.67482 16.0058 9.02311 15.983L8.95911 14.985C8.65344 15.0051 8.34678 15.0051 8.04111 14.985L7.97711 15.983ZM9.00011 4.5C9.00011 4.36739 8.94744 4.24021 8.85367 4.14645C8.7599 4.05268 8.63272 4 8.50011 4C8.36751 4 8.24033 4.05268 8.14656 4.14645C8.05279 4.24021 8.00011 4.36739 8.00011 4.5V7.5H5.00011C4.86751 7.5 4.74033 7.55268 4.64656 7.64645C4.55279 7.74021 4.50011 7.86739 4.50011 8C4.50011 8.13261 4.55279 8.25979 4.64656 8.35355C4.74033 8.44732 4.86751 8.5 5.00011 8.5H8.00011V11.5C8.00011 11.6326 8.05279 11.7598 8.14656 11.8536C8.24033 11.9473 8.36751 12 8.50011 12C8.63272 12 8.7599 11.9473 8.85367 11.8536C8.94744 11.7598 9.00011 11.6326 9.00011 11.5V8.5H12.0001C12.1327 8.5 12.2599 8.44732 12.3537 8.35355C12.4474 8.25979 12.5001 8.13261 12.5001 8C12.5001 7.86739 12.4474 7.74021 12.3537 7.64645C12.2599 7.55268 12.1327 7.5 12.0001 7.5H9.00011V4.5Z"
                fill="black"
              />
            </g>
            <defs>
              <clipPath id="clip0_82_11">
                <rect width="16" height="16" fill="white" transform="translate(0.5)" />
              </clipPath>
            </defs>
          </svg>
        </template>
        <template #icon v-else>
          <svg
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g clip-path="url(#clip0_195_5)">
              <path
                d="M8.00011 1.88802e-07C7.82411 1.88802e-07 7.64978 0.00566686 7.47711 0.0170002L7.54111 1.015C7.84678 0.994914 8.15344 0.994914 8.45911 1.015L8.52311 0.0170002C8.34901 0.00563198 8.17459 -3.77165e-05 8.00011 1.88802e-07ZM6.44011 0.152C6.09345 0.221334 5.75611 0.311333 5.42811 0.422L5.74911 1.37C6.03578 1.272 6.33045 1.193 6.63311 1.133L6.44011 0.153V0.152ZM10.5721 0.423C10.2414 0.311033 9.90364 0.22084 9.56111 0.153L9.36711 1.133C9.66911 1.193 9.96378 1.272 10.2511 1.37L10.5721 0.423ZM12.4451 1.348C12.1549 1.15374 11.8522 0.978703 11.5391 0.824L11.0961 1.72C11.3714 1.85667 11.6358 2.00967 11.8891 2.179L12.4451 1.348ZM4.46011 0.824C4.14611 0.979334 3.84445 1.154 3.55511 1.348L4.11111 2.178C4.36517 2.00819 4.63007 1.85519 4.90411 1.72L4.46011 0.824ZM2.72511 1.985C2.46245 2.21567 2.21578 2.46233 1.98511 2.725L2.73711 3.385C2.93911 3.155 3.15511 2.939 3.38511 2.737L2.72511 1.985ZM14.0151 2.725C13.7849 2.46245 13.5377 2.21525 13.2751 1.985L12.6151 2.737C12.8458 2.939 13.0618 3.155 13.2631 3.385L14.0151 2.725ZM15.1761 4.46C15.0214 4.14723 14.8463 3.84492 14.6521 3.555L13.8221 4.111C13.9914 4.36433 14.1441 4.62867 14.2801 4.904L15.1761 4.46ZM1.34811 3.555C1.15345 3.84367 0.978781 4.14567 0.824114 4.461L1.72011 4.904C1.85678 4.62867 2.00978 4.36433 2.17911 4.111L1.34811 3.555ZM0.423114 5.428C0.311146 5.75875 0.220953 6.09647 0.153114 6.439L1.13311 6.633C1.19311 6.331 1.27211 6.03633 1.37011 5.749L0.423114 5.428ZM15.8481 6.44C15.7803 6.09713 15.6901 5.75907 15.5781 5.428L14.6301 5.749C14.7281 6.03567 14.8071 6.33033 14.8671 6.633L15.8481 6.44ZM0.0171139 7.477C-0.00570462 7.82529 -0.00570462 8.17471 0.0171139 8.523L1.01511 8.459C0.995027 8.15333 0.995027 7.84667 1.01511 7.541L0.0171139 7.477ZM16.0001 8C16.0002 7.82553 15.9945 7.6511 15.9831 7.477L14.9851 7.541C15.0052 7.84667 15.0052 8.15333 14.9851 8.459L15.9831 8.523C15.9945 8.3489 16.0002 8.17447 16.0001 8ZM0.152114 9.56C0.221447 9.90667 0.311447 10.244 0.422114 10.572L1.37011 10.251C1.27191 9.96182 1.19275 9.66652 1.13311 9.367L0.153114 9.561L0.152114 9.56ZM15.5771 10.572C15.6891 10.2433 15.7791 9.90633 15.8471 9.561L14.8671 9.367C14.8071 9.669 14.7281 9.96367 14.6301 10.251L15.5771 10.572ZM0.824114 11.54C0.978856 11.8528 1.1539 12.1551 1.34811 12.445L2.17811 11.889C2.0083 11.6349 1.85531 11.37 1.72011 11.096L0.824114 11.54ZM14.6521 12.445C14.8468 12.1557 15.0214 11.8537 15.1761 11.539L14.2801 11.096C14.1434 11.3713 13.9904 11.6357 13.8211 11.889L14.6521 12.445ZM1.98511 13.275C2.21578 13.5377 2.46245 13.7843 2.72511 14.015L3.38511 13.263C3.15519 13.0614 2.93873 12.8449 2.73711 12.615L1.98511 13.275ZM13.2751 14.015C13.5378 13.7843 13.7844 13.5377 14.0151 13.275L13.2631 12.615C13.0618 12.8457 12.8458 13.0617 12.6151 13.263L13.2751 14.015ZM11.5401 15.176C11.8541 15.0207 12.1558 14.846 12.4451 14.652L11.8891 13.822C11.6351 13.9918 11.3702 14.1448 11.0961 14.28L11.5401 15.176ZM3.55511 14.652C3.84445 14.8467 4.14645 15.0213 4.46111 15.176L4.90411 14.28C4.63004 14.1445 4.36514 13.9912 4.11111 13.821L3.55511 14.652ZM5.42811 15.577C5.75678 15.689 6.09378 15.779 6.43911 15.847L6.63311 14.867C6.33359 14.8074 6.0383 14.7282 5.74911 14.63L5.42811 15.577ZM9.56011 15.848C9.90298 15.7802 10.241 15.69 10.5721 15.578L10.2511 14.63C9.96193 14.7282 9.66663 14.8074 9.36711 14.867L9.56111 15.847L9.56011 15.848ZM7.47711 15.983C7.82541 16.0058 8.17482 16.0058 8.52311 15.983L8.45911 14.985C8.15344 15.0051 7.84678 15.0051 7.54111 14.985L7.47711 15.983ZM4.50011 7.5C4.36751 7.5 4.24033 7.55268 4.14656 7.64645C4.05279 7.74021 4.00011 7.86739 4.00011 8C4.00011 8.13261 4.05279 8.25979 4.14656 8.35355C4.24033 8.44732 4.36751 8.5 4.50011 8.5H11.5001C11.6327 8.5 11.7599 8.44732 11.8537 8.35355C11.9474 8.25979 12.0001 8.13261 12.0001 8C12.0001 7.86739 11.9474 7.74021 11.8537 7.64645C11.7599 7.55268 11.6327 7.5 11.5001 7.5H4.50011Z"
                fill="black"
              />
            </g>
            <defs>
              <clipPath id="clip0_195_5">
                <rect width="16" height="16" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </template>
        <span v-if="!isMoreView">사진 더보기</span>
        <span v-else>사진 요약보기</span>
      </BaseButton>
    </div>
  </section>

  <vue-easy-lightbox
    :visible="visibleRef"
    :imgs="galleryItems"
    :index="indexRef"
    :zoomDisabled="true"
    :pinchDisabled="true"
    :moveDisabled="true"
    :dblclickDisabled="true"
    :rotateDisabled="true"
    @hide="closeLightbox"
  >
    <template v-slot:toolbar></template>
  </vue-easy-lightbox>
</template>

<script>
import CommonHeader from '@/components/CommonHeader.vue';
import { ref } from 'vue';

export default {
  components: {
    CommonHeader,
  },
  setup() {
    const galleryItems = [
      '/static/images/gallery12.webp',
      '/static/images/gallery13.webp',
      '/static/images/gallery01.webp',
      '/static/images/gallery02.webp',
      '/static/images/gallery03.webp',
      '/static/images/gallery04.webp',
      '/static/images/gallery05.webp',
      '/static/images/gallery06.webp',
      '/static/images/gallery07.webp',
      '/static/images/gallery08.webp',
      '/static/images/gallery09.webp',
      '/static/images/gallery10.webp',
      '/static/images/gallery11.webp',
      '/static/images/gallery14.webp',
      '/static/images/gallery15.webp',
      '/static/images/gallery16.webp',
      '/static/images/gallery17.webp',
      '/static/images/gallery18.webp',
      '/static/images/gallery19.webp',
      '/static/images/gallery20.webp',
      '/static/images/gallery21.webp',
      '/static/images/gallery22.webp',
      '/static/images/gallery23.webp',
      '/static/images/gallery24.webp',
      '/static/images/gallery25.webp',
      '/static/images/gallery26.webp',
      '/static/images/gallery27.webp',
      '/static/images/gallery28.webp',
      '/static/images/gallery29.webp',
      '/static/images/gallery30.webp',
      '/static/images/gallery31.webp',
    ];
    const isMoreView = ref(false);
    const visibleRef = ref(false);
    const indexRef = ref(0);

    const openLightbox = (index) => {
      indexRef.value = index;
      visibleRef.value = true;
    };

    const closeLightbox = () => {
      visibleRef.value = false;
    };

    return { galleryItems, isMoreView, visibleRef, indexRef, openLightbox, closeLightbox };
  },
};
</script>

<style lang="scss" scoped>
.gallery__section {
  padding-top: 80px;
  padding-bottom: 80px;

  .grid__wrapper {
    position: relative;
    margin-bottom: 10px;
    overflow: hidden;

    &:not(.expanded) {
      height: 1000px;

      &::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 90px;
        background-image: linear-gradient(
          0deg,
          $white 20%,
          rgba(255, 255, 255, 0.3) 65%,
          rgba(255, 255, 255, 0) 100%
        );
        z-index: 1;
      }
    }
  }

  .grid__item {
    display: grid;
    grid-template-rows: 1fr auto;
    margin-bottom: 8px;
    break-inside: avoid;

    figure {
      position: relative;
      border-radius: 4px;
      overflow: hidden;
      cursor: pointer;

      .overlay {
        position: absolute;
        inset: 0px;
        z-index: 10;
      }

      img {
        user-select: none;
        pointer-events: none;
      }
    }
  }
}
</style>
